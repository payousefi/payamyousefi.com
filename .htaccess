Options -Indexes
Options +FollowSymLinks

ErrorDocument 404 /404.html

# Redirect /music to music subdomain
# Using RedirectMatch (processed before directory handling)
RedirectMatch 301 ^/music/?(.*)$ https://music.payamyousefi.com/$1

# Enable RewriteEngine
RewriteEngine On

# Legacy portfolio redirects
RewriteRule ^portfolio/(.*)$ / [R=301,NC,L]

# SPA-like routing for category pages
# Rewrite /apps, /content-sites, /graphic, /science to index.html
# These directories exist (Jekyll creates them for posts), but we want
# the root category URLs to serve index.html for SPA navigation
RewriteRule ^(apps|content-sites|graphic|science)/?$ /index.html [L]

# Redirect trailing slashes to non-trailing (optional, for cleaner URLs)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ /$1 [R=301,L]
